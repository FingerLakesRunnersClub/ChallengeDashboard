@using System.Text.Json
@using FLRC.ChallengeDashboard
@model Course
@{ ViewBag.Title = Model.Name; }

<h2>@Model.Name</h2>
<h4>@Model.Distance m (@Model.Type)</h4>

<script>
    const fields = [
        { name: 'Rank', width: 1, center: true, value: r => r.Rank },
        { name: 'Name', width: 2, center: false, value: r => r.Athlete.Name },
        { name: 'Age', width: 1, center: true, value: r => r.Athlete.Age },
        { name: 'Team', width: 1, center: true, value: r => r.Athlete.TeamDisplay },
        { name: 'Category', width: 1, center: true, value: r => r.Athlete.CategoryDisplay },
        { name: 'Time', width: 2, center: true, value: r => r.Result.DisplayTime },
        { name: 'BehindLeader', label: 'Behind', width: 2, center: true, value: r => r.BehindLeaderDisplay },
        { name: 'AgeGrade', label: 'Age Grade', width: 1, center: true, value: r => r.AgeGradeDisplay },
    ];

    results = @Html.Raw(JsonSerializer.Serialize(Model.Fastest()));
</script>

@await Html.PartialAsync("Results")