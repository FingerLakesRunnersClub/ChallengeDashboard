@using FLRC.AgeGradeCalculator
@using FLRC.ChallengeDashboard
@model IEnumerable<Course>
@{ ViewBag.Title = "Dashboard"; }

@foreach (var course in Model)
{
    <h4>@course.Name</h4>

    <a href="/Course/@course.ID/Fastest">View All</a>

    <div class="row">
        @foreach (var category in Enum.GetValues<Category>())
        {
            var top3 = course.Fastest(category).Take(3).ToArray();

            if (top3.Length > 0)
            {
                <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                    <table class="table table-bordered table-striped table-sm">
                        <thead>
                            <tr>
                                <th colspan="3" class="text-center">Fastest 3 (@category)</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var result in top3)
                            {
                                <tr>
                                    <td class="text-center">@result.Rank</td>
                                    <td>@result.Athlete.Name</td>
                                    <td class="text-right">@result.Result.DisplayTime</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
        }
    </div>
}